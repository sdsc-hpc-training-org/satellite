
# This is a minimal sshd configuration file for use in
# a Satellite container.
# It is intended to be used for port-forwarding only.

Port 22
AddressFamily inet
ListenAddress 0.0.0.0

HostKey /var/secrets/ssh/ssh_host_rsa_key
HostKey /var/secrets/ssh/ssh_host_ed25519_key

# Logging
SyslogFacility AUTH
LogLevel VERBOSE

# Authentication:

LoginGraceTime 2m
PermitRootLogin no
StrictModes yes
#MaxAuthTries 6
#MaxSessions 0

PubkeyAuthentication yes

# Expect .ssh/authorized_keys2 to be disregarded by default in future.
#AuthorizedKeysFile	.ssh/authorized_keys .ssh/authorized_keys2

#AuthorizedPrincipalsFile none

AuthorizedKeysCommand /var/www/satellite/bin/revssh-authorized-keys
AuthorizedKeysCommandUser www-data

HostbasedAuthentication no
PasswordAuthentication no
ChallengeResponseAuthentication no
KerberosAuthentication no
GSSAPIAuthentication no

UsePAM yes

X11Forwarding no
PermitTTY no
AllowAgentForwarding no
AllowTcpForwarding remote
AllowStreamLocalForwarding remote
StreamLocalBindMask 0111
StreamLocalBindUnlink yes
ForceCommand "/bin/echo 'Try the -N argument'"
ChrootDirectory /var/lib/satellite-revssh/%u

PrintMotd no
PermitUserEnvironment no
ClientAliveInterval 5
ClientAliveCountMax 3
UseDNS no
MaxStartups 10:30:100

